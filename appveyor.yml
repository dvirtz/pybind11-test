platform:
  - Win32
  
environment:  
  CTEST_OUTPUT_ON_FAILURE:
    1
  matrix:
    - PYTHON: C:\Python27.10
      PYTHON_VERSION: 2.7.10
      
configuration: Release

install:
  - git submodule update --init --recursive
  - if "%platform%"=="Win32" set PYTHON_URL=https://www.python.org/ftp/python/2.7.10/python-2.7.10.msi
  - if "%platform%"=="x64" set PYTHON_URL=https://www.python.org/ftp/python/2.7.10/python-2.7.10.amd64.msi
  - appveyor DownloadFile %PYTHON_URL% -FileName python2710.msi
  - msiexec /i python2710.msi /qn /norestart TARGETDIR=%PYTHON%
  - set PATH=%PYTHON%;%PYTHON%\\Scripts;%PATH%
  - appveyor DownloadFile https://bootstrap.pypa.io/get-pip.py
  - python get-pip.py
  - pip install gmusicapi 

build_script:
  - cmake . -B_build
  - cmake --build _build --config %CONFIGURATION% -- -clp:Verbosity=minimal
  
test_script:
  - cmake --build _build --target RUN_TESTS -- -clp:Verbosity=minimal